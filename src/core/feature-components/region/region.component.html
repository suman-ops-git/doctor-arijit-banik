<section class="region-section py-5 region-bg">
    <div class="container">
        <h2 class="text-center mb-4 text-primary region-title">
            <i class="bi bi-geo-alt-fill me-2 region-title-icon"></i>
            Locations We Served
        </h2>
        <section>
            <ul class="nav nav-tabs justify-content-center mb-4 locations-section" id="locationTabs" role="tablist">
                <li class="nav-item" role="presentation" *ngFor="let region of locations?.regions; let i = index">
                    <button class="nav-link" [class.active]="i === 0"
                        [id]="sanitizeRegionName(region.name) + '-tab'"
                        data-bs-toggle="tab"
                        [attr.data-bs-target]="'#' + sanitizeRegionName(region.name)"
                        type="button" role="tab"
                        [attr.aria-controls]="sanitizeRegionName(region.name)"
                        [attr.aria-selected]="i === 0 ? 'true' : 'false'">
                        {{ region.name }}
                    </button>
                </li>
            </ul>
            <div class="tab-content shadow rounded bg-white" id="locationTabsContent"
                style="padding: 2rem 1.5rem; border: 1px solid #dee2e6; border-top: none;">
                <div *ngFor="let region of locations?.regions; let i = index"
                     class="tab-pane fade"
                     [class.show]="i === 0"
                     [class.active]="i === 0"
                     [id]="sanitizeRegionName(region.name)"
                     role="tabpanel"
                     [attr.aria-labelledby]="sanitizeRegionName(region.name) + '-tab'">
                    <div class="mb-3">
                        <h4 class="mb-4 text-center text-success region-branch-title">
                            <i class="bi bi-building me-2"></i>{{ region.name }} Branches
                        </h4>
                        <div class="row g-4">
                            <div class="col-md-6" *ngFor="let branch of region.branches">
                                <div class="card border-0 shadow-sm h-100 region-card">
                                    <div class="card-body">
                                        <h5 class="card-title mb-2">
                                            <i class="bi bi-geo-alt-fill me-2 text-success"></i>{{ branch.title }}
                                        </h5>
                                        <p class="card-text text-muted small mb-0">{{ branch.address }}</p>
                                        <p class="card-text text-muted small mb-0" *ngIf="branch.phone">Phone: {{ branch.phone }}</p>
                                        <!-- <div *ngIf="branch.mapUrl" class="mt-3">
                                            <iframe
                                                [src]="branch.mapUrl | safeUrl"
                                                width="100%"
                                                height="200"
                                                style="border:0;"
                                                allowfullscreen=""
                                                loading="lazy"
                                                referrerpolicy="no-referrer-when-downgrade">
                                            </iframe>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</section>